{
  "comments": [
    {
      "key": {
        "uuid": "5a93c517_8703570f",
        "filename": "kubernetes/common/mysql/templates/pvc.yaml",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 497
      },
      "writtenOn": "2018-04-17T06:45:52Z",
      "side": 0,
      "message": "Why disable this? If nfs-provisioner is enabled, there is no need in this pvc.",
      "range": {
        "startLine": 17,
        "startChar": 88,
        "endLine": 17,
        "endChar": 120
      },
      "revId": "a6ee34ed3a655541a4cac72c15dc7a9ee57a0ccc",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_3deb7414",
        "filename": "kubernetes/common/mysql/templates/pvc.yaml",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 659
      },
      "writtenOn": "2018-04-17T12:43:46Z",
      "side": 0,
      "message": "I\u0027m not sure about this change as well.  I\u0027ve pulled this change down and tried it with the NFS Provisioner enabled.  I see two PV and two PVC per mysql instance, where I expected only one:\n\n$ kubectl get pods -n onap\nNAME                                          READY     STATUS    RESTARTS   AGE\ndevel-appc-0                                  1/2       Running   0          6m\ndevel-appc-cdt-868d59f55-6w9qz                1/1       Running   0          6m\ndevel-appc-db-0                               2/2       Running   1          6m\ndevel-appc-dgbuilder-8855dc56b-mkbsd          1/1       Running   0          6m\ndevel-appc-nfs-provisioner-7d955fbcdd-9xxc4   1/1       Running   0          6m\ndevel-sdnc-0                                  1/2       Running   0          6m\ndevel-sdnc-db-0                               2/2       Running   0          6m\ndevel-sdnc-dgbuilder-584598d74-8bl9t          1/1       Running   0          6m\ndevel-sdnc-dmaap-listener-6d9c8bdd67-26hmv    1/1       Running   0          6m\ndevel-sdnc-nfs-provisioner-677fc6966d-pk2k9   1/1       Running   0          6m\ndevel-sdnc-portal-6dbd6456fb-xnqhl            0/1       Running   2          6m\ndevel-sdnc-ueb-listener-65587586b8-tbqnd      1/1       Running   0          6m\n\n$ kubectl get pvc -n onap\nNAME                                 STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS         AGE\ndevel-appc-db-data                   Bound     pvc-49182df1-423b-11e8-80d4-02465a391c14   1Gi        RWX            devel-appc-db-data   7m\ndevel-appc-db-data-devel-appc-db-0   Bound     pvc-4950f6e3-423b-11e8-80d4-02465a391c14   1Gi        RWX            devel-appc-db-data   7m\ndevel-sdnc-db-data                   Bound     pvc-49188f90-423b-11e8-80d4-02465a391c14   1Gi        RWX            devel-sdnc-db-data   7m\ndevel-sdnc-db-data-devel-sdnc-db-0   Bound     pvc-496b0540-423b-11e8-80d4-02465a391c14   1Gi        RWX            devel-sdnc-db-data   7m\n\n\n$ kubectl get pv -n onap\nNAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS    CLAIM                                     STORAGECLASS         REASON    AGE\npvc-49182df1-423b-11e8-80d4-02465a391c14   1Gi        RWX            Delete           Bound     onap/devel-appc-db-data                   devel-appc-db-data             7m\npvc-49188f90-423b-11e8-80d4-02465a391c14   1Gi        RWX            Delete           Bound     onap/devel-sdnc-db-data                   devel-sdnc-db-data             7m\npvc-4950f6e3-423b-11e8-80d4-02465a391c14   1Gi        RWX            Delete           Bound     onap/devel-appc-db-data-devel-appc-db-0   devel-appc-db-data             7m\npvc-496b0540-423b-11e8-80d4-02465a391c14   1Gi        RWX            Delete           Bound     onap/devel-sdnc-db-data-devel-sdnc-db-0   devel-sdnc-db-data             7m",
      "parentUuid": "5a93c517_8703570f",
      "range": {
        "startLine": 17,
        "startChar": 88,
        "endLine": 17,
        "endChar": 120
      },
      "revId": "a6ee34ed3a655541a4cac72c15dc7a9ee57a0ccc",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_3d2e1444",
        "filename": "kubernetes/common/mysql/templates/pvc.yaml",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 201
      },
      "writtenOn": "2018-04-17T13:14:30Z",
      "side": 0,
      "message": "the change I proposed was because in my test, when the provisioner was enabled, no pvc appeared and then by consequences no pv was provisonned. And when you look at it, a provisioner is not supposed to create a pv when nobody is requesting it. And the way to request a provisioner to create a pv is to present a pvc with a storageclass associated to that provisioner.",
      "parentUuid": "5a93c517_3deb7414",
      "range": {
        "startLine": 17,
        "startChar": 88,
        "endLine": 17,
        "endChar": 120
      },
      "revId": "a6ee34ed3a655541a4cac72c15dc7a9ee57a0ccc",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}