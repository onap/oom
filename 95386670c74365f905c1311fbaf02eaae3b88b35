{
  "comments": [
    {
      "key": {
        "uuid": "b78c2a98_9f365952",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-04-27T23:05:02Z",
      "side": 1,
      "message": "is this encrypted or what?",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a704540d_d9e5af1f",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 5
      },
      "writtenOn": "2020-04-28T08:12:06Z",
      "side": 1,
      "message": "I\u0027m not a Portal code expert but I see it expects an encrypted value for the AAF rest api password, they use a key in their code to decrypt it (in fact the code that does this is in portal-sdk : CipherUtil.java -\u003e DecryptPKC)\n\nmaybe Sunder can comment ?",
      "parentUuid": "b78c2a98_9f365952",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4560761f_74df63a9",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-04-28T16:46:07Z",
      "side": 1,
      "message": "Hmm last time when we spoke about this this password was supposed to be obtained in runtime right?\n\nThen it\u0027s kind of unclear for me how we managed to go from runtime obrained password to hardcoding an encrypted password.\nBTW. Where is the key to encrypt it? How anyone is supposed to change that?",
      "parentUuid": "a704540d_d9e5af1f",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40c2550c_c17ee157",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 679
      },
      "writtenOn": "2020-04-28T19:43:42Z",
      "side": 1,
      "message": "There is a Portal \"key.properties\" file. The key is coming from there and is used to decrypt the value. Currently, the \"key.properties\" file is in the image. We will externalize this in the Gilian release.",
      "parentUuid": "4560761f_74df63a9",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b0c7d6b_8bd1d6a7",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-04-28T19:55:07Z",
      "side": 1,
      "message": "Then there is no way you can get this patch merged.\nIf you want to have it merged you need to:\n1) (recommended) stop encrypting your password\nor\n2) (plan minimum) remove key from the image, add it as yet another password using common secret template, put this password in plain text and later encrypt it in init container.",
      "parentUuid": "40c2550c_c17ee157",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0ce5c24_78a468f8",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 679
      },
      "writtenOn": "2020-04-28T21:18:03Z",
      "side": 1,
      "message": "With option 2, we can easily remove the key from the image and mount it from OOM. But, why can\u0027t this password be encrypted with the same key. Adding the code in the init container to encrypt using some custom code is a big change at this point.",
      "parentUuid": "0b0c7d6b_8bd1d6a7",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fbfe7926_92a7f177",
        "filename": "kubernetes/portal/charts/portal-app/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-04-28T21:22:59Z",
      "side": 1,
      "message": "The change would be relatively simple. I can help with it if you face any issues.\n\nThere are a few reasons why you shouldn\u0027t do this. As you store your encryption key in the image it\u0027s compromised by design which means that you are mishandling your cryptography - which means it\u0027s a bug and we cannot accept a new bugs in OOM.\n\nSecondly, think a while about a user who would like to deploy ONAP in production. How he is supposed to change this password? How we can know where is the key, which algorithm has been used etc?",
      "parentUuid": "e0ce5c24_78a468f8",
      "revId": "95386670c74365f905c1311fbaf02eaae3b88b35",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}