#{{ if eq .Values.provisioner "nfs" }}
---
kind: Service
apiVersion: v1
metadata:
  name: {{ include "common.storagename" . }}-provisioner
  namespace: {{ include "common.namespace" . }}
  labels:
    app: {{ include "common.storagename" . }}-provisioner
spec:
  ports:
    - name: nfs
      port: {{ .Values.service.nfsPort }}
    - name: mountd
      port: {{ .Values.service.mountdPort }}
    - name: rpcbind
      port: {{ .Values.service.rpcbindPort }}
    - name: rpcbind-udp
      port: {{ .Values.service.rpcbindUdpPort }}
      protocol: UDP
  selector:
    app: {{ include "common.storagename" . }}-provisioner
#{{ end }}
