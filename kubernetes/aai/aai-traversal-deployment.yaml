apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: aai-traversal
spec:
  selector:
    matchLabels:
      app: aai-traversal
  template:
    metadata:
      labels:
        app: aai-traversal
      name: aai-traversal
    spec:
      containers:
      - env:
        - name: CHEF_BRANCH
          value: master
        - name: AAI_CHEF_ENV
          value: simpledemo
        - name: AAI_CORE_VERSION
          value: 1.1.0-SNAPSHOT
        - name: AAI_CHEF_LOC
          value: /var/chef/aai-data/environments
        - name: CHEF_GIT_URL
          value: http://gerrit.onap.org/r/aai
        - name: PATH
          value: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
        - name: JAVA_HOME
          value: usr/lib/jvm/java-8-openjdk-amd64
        - name: DEBIAN_FRONTEND
          value: noninteractive
        image: nexus3.onap.org:10001/openecomp/aai-traversal:1.1-STAGING-latest
        name: aai-traversal
        volumeMounts:
        - mountPath: /opt/aai/logroot/AAI-GQ/
          name: aai-traversal-logs
      volumes:
        - name: aai-traversal-logs
          hostPath:
            path: /dockerdata/onapdemo/aai/aai-traversal/logs/
        ports:
        - containerPort: 8446
        readinessProbe:
          tcpSocket:
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 10
      restartPolicy: Always
      imagePullSecrets:
      - name: onap-docker-registry-key
