apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: aai-resources
spec:
  selector:
    matchLabels:
      app: aai-resources
  template:
    metadata:
      labels:
        app: aai-resources
      name: aai-resources
    spec:
      containers:
      - name: aai-resources
        image: nexus3.onap.org:10001/openecomp/aai-resources:1.1-STAGING-latest
        env:
        - name: CHEF_BRANCH
          value: master
        - name: AAI_CHEF_ENV
          value: simpledemo
        - name: AAI_CORE_VERSION
          value: 1.1.0-SNAPSHOT
        - name: AAI_CHEF_LOC
          value: /var/chef/aai-data/environments
        - name: CHEF_GIT_URL
          value: http://gerrit.onap.org/r/aai
        - name: PATH
          value: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
        - name: JAVA_HOME
          value: /usr/lib/jvm/java-8-openjdk-amd64
        - name: DEBIAN_FRONTEND
          value: noninteractive
        volumeMounts:
        - mountPath: /opt/aai/logroot/AAI-RES/
          name: aai-resources-logs
        ports:
        - containerPort: 8447
        readinessProbe:
          tcpSocket:
            port: 8447
          initialDelaySeconds: 5
          periodSeconds: 10
      volumes:
      - name: aai-resources-logs
        hostPath:
          path: /dockerdata/onapdemo/aai/aai-resources/logs/
      restartPolicy: Always
      imagePullSecrets:
      - name: onap-docker-registry-key
