{
  "comments": [
    {
      "key": {
        "uuid": "c6545fa3_7bfecd19",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 40,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-09-03T09:20:07Z",
      "side": 1,
      "message": "would be great if you could use here the readinessCheck template",
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69c9483a_687b6338",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 40,
      "author": {
        "id": 5275
      },
      "writtenOn": "2020-09-03T14:02:17Z",
      "side": 1,
      "message": "Hi, Krzysztof Opasiak\n  Thanks for your advice.\n  It is necessary to judge whether the job is completed. We have seen that the oom readinesscheck does not support job detection. We have solved this problem as follows:\n\nin oom/kubernetes/common/readinessCheck/templates/_readinessCheck.tplï¼š\n\n{{- define \"common.readinessJobCheck.waitFor\" -}}\n{{-   $dot :\u003d default . .dot -}}\n{{-   $initRoot :\u003d default $dot.Values.readinessCheck .initRoot -}}\n{{/*  Our version of helm doesn\u0027t support deepCopy so we need this nasty trick */}}\n{{-   $subchartDot :\u003d fromJson (include \"common.subChartDot\" (dict \"dot\" $dot \"initRoot\" $initRoot)) }}\n{{-   $wait_for :\u003d default $initRoot.wait_for .wait_for -}}\n{{-   $containers :\u003d index (ternary (dict \"containers\" $wait_for) $wait_for (kindIs \"slice\" $wait_for)) \"containers\" -}}\n{{-   $namePart :\u003d index (ternary (dict) $wait_for (kindIs \"slice\" $wait_for)) \"name\" -}}\n- name: {{ include \"common.name\" $dot }}{{ ternary \"\" (printf \"-%s\" $namePart) (empty $namePart) }}-readiness\n  image: \"{{ $subchartDot.Values.global.readinessRepository }}/{{ $subchartDot.Values.global.readinessImage }}\"\n  imagePullPolicy: {{ $subchartDot.Values.global.pullPolicy | default $subchartDot.Values.pullPolicy }}\n  command:\n  - /root/job_complete.py\n  args:\n  {{- range $container :\u003d $containers }}\n  - --job-name\n  - {{ tpl $container $dot }}\n  {{- end }}\n  env:\n  - name: NAMESPACE\n    valueFrom:\n      fieldRef:\n        apiVersion: v1\n        fieldPath: metadata.namespace\n  resources:\n    limits:\n      cpu: {{ $subchartDot.Values.limits.cpu }}\n      memory: {{ $subchartDot.Values.limits.memory }}\n    requests:\n      cpu: {{ $subchartDot.Values.requests.cpu }}\n      memory: {{ $subchartDot.Values.requests.memory }}\n{{- end -}}",
      "parentUuid": "c6545fa3_7bfecd19",
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c7ebcc5_99f48ec7",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 40,
      "author": {
        "id": 5275
      },
      "writtenOn": "2020-09-04T02:28:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "69c9483a_687b6338",
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b93fde43_a5e49f7c",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 62,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-09-03T09:20:07Z",
      "side": 1,
      "message": "this is provided internally by the template so you should remove it",
      "range": {
        "startLine": 54,
        "startChar": 1,
        "endLine": 62,
        "endChar": 57
      },
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6377381_1acfae2c",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 62,
      "author": {
        "id": 5275
      },
      "writtenOn": "2020-09-03T14:02:17Z",
      "side": 1,
      "message": "This modification requires the readnesscheck module to support job detection. What about your suggestion?",
      "parentUuid": "b93fde43_a5e49f7c",
      "range": {
        "startLine": 54,
        "startChar": 1,
        "endLine": 62,
        "endChar": 57
      },
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6936aead_90977dba",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 100,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-09-03T09:20:07Z",
      "side": 1,
      "message": "why do you need this IP? Couln\u0027t you just listen on 0.0.0.0?",
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "708e392e_e483d0b2",
        "filename": "kubernetes/modeling/charts/modeling-etsicatalog/templates/deployment.yaml",
        "patchSetId": 11
      },
      "lineNbr": 100,
      "author": {
        "id": 5275
      },
      "writtenOn": "2020-09-03T14:22:51Z",
      "side": 1,
      "message": "We need this IP to register our services to MSB",
      "parentUuid": "6936aead_90977dba",
      "revId": "03685c4daa48c3fb1e6a951064a201c8f399fd23",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}