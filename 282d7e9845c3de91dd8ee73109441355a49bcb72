{
  "comments": [
    {
      "key": {
        "uuid": "937cbb51_ad86151c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 93
      },
      "writtenOn": "2021-04-01T00:41:43Z",
      "side": 1,
      "message": "switch to DCAEGEN2-2684 or corresponding sub-task",
      "range": {
        "startLine": 14,
        "startChar": 10,
        "endLine": 14,
        "endChar": 23
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe5134f1_07cf9265",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-01T15:23:06Z",
      "side": 1,
      "message": "Sure will get this updated in next patch-set.",
      "parentUuid": "937cbb51_ad86151c",
      "range": {
        "startLine": 14,
        "startChar": 10,
        "endLine": 14,
        "endChar": 23
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f09d4e0_5799369c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Updated",
      "parentUuid": "fe5134f1_07cf9265",
      "range": {
        "startLine": 14,
        "startChar": 10,
        "endLine": 14,
        "endChar": 23
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ccf29f4a_7d2865fe",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 129,
      "author": {
        "id": 93
      },
      "writtenOn": "2021-04-01T00:41:43Z",
      "side": 1,
      "message": "we could add into template to support app-config load from a json file although in this case dont see need to load separate static configuration by yaml seperate and json separately.\n\nalso change here needs to be handled in generic (without dependency on pmsh based volument mount and config path",
      "range": {
        "startLine": 118,
        "startChar": 0,
        "endLine": 129,
        "endChar": 16
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0dbb4a07_37078b73",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 129,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-01T15:23:06Z",
      "side": 1,
      "message": "Yes, I agree but, I believe if we can achive this migration with zero or minimal change on application code base that will be better approach.\n\n\u003e This Json data that we are populating is static PMSH Monitoring Policy which is very much needed at start of application. \n\n\u003e If we add in below manner in values.yaml, it will be represented as string in Consul which is not good for application to consume at moment, we expect Json format data. \n\npmsh.policy: \u0027{\"subscription\":{\"subscriptionName\":\"ExtraPM-All-gNB-R2B\",\"administrativeState\":\"UNLOCKED\",\"fileBasedGP\":15,\"fileLocation\":\"\\/pm\\/pm.xml\",\"nfFilter\":{\"nfNames\":[\"^pnf.*\",\"^vnf.*\"],\"modelInvariantIDs\":[],\"modelVersionIDs\":[],\"modelNames\":[]},\"measurementGroups\":[{\"measurementGroup\":{\"measurementTypes\":[{\"measurementType\":\"countera\"},{\"measurementType\":\"counterb\"}],\"managedObjectDNsBasic\":[{\"DN\":\"dna\"},{\"DN\":\"dnb\"}]}},{\"measurementGroup\":{\"measurementTypes\":[{\"measurementType\":\"counterc\"},{\"measurementType\":\"counterd\"}],\"managedObjectDNsBasic\":[{\"DN\":\"dnc\"},{\"DN\":\"dnd\"}]}}]}}\u0027\n\n\u003e If we try to populate in yaml then values.yaml will grow depending on PMSH Monitoring Policy data and we don\u0027t want to confuse operators here. To keep it simple just update the data in Json file sitting in /resources/config/application.json and get started we choose to keep a separate file.\n\n\u003e Sure, I am in communication to Jack, after finding a better generic approach to include configMap to load files will be updating generic names.",
      "parentUuid": "ccf29f4a_7d2865fe",
      "range": {
        "startLine": 118,
        "startChar": 0,
        "endLine": 129,
        "endChar": 16
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ac2b039_5d72f961",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 129,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "Ok guys so my take on this is similar to Vijay\n\nthere is no agreement on putting ifs for every special case that we have. We need to work on generic solution to share the code not to cut it with ifs in the way that no one is able to read or debug it.\n\nWhen it comes to technical details of pmsh I feel stupid and really lost here so please help me understand where the issue is and I\u0027ll do my best to help you resolve it.\n\nSo what I currently understand is that you have 2 cases:\n#1 (That was existing in this template) where configuration comes as a yaml dictionary which is then put into yaml file inside a configmap and later inside container \"translated\" into JSON and then put to consul (using --key-yaml option)\n\n#2 (This new case) when you want your policy to be in the JSON file that you have in your resources dir (using -k option)\n\nDo I understand your issue correctly?\n\nIf yes then I\u0027d recommend merging this into a single use case in the following way:\n\n1) Give up converting to json inside a container image and just use toJSON helm command while creating a configmap to convert configuration from values.yaml into a proper JSON. This way the init container will always expect to have configuration in JSON\n\n2) If you want to keep your config in a separate file instead of values.yaml just implement the bring your own ConfigMap concept that we are using here and there.\nJust add {{ if not .Values.applicationConfigExternalCM }} around configmap definition in common/dcaegen2-services-common/templates/_configmap.tpl, replace configmap name in _deployment with sth like {{(tpl (default \"{{ include \"common.fullname\" . }}-application-config-configmap\" .Values.applicationConfigExternalCM) .)}} and then in pmsh service you just create your CM however you want and put its name in .Values.applicationConfigExternalCM",
      "parentUuid": "0dbb4a07_37078b73",
      "range": {
        "startLine": 118,
        "startChar": 0,
        "endLine": 129,
        "endChar": 16
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f97b066b_ba67533b",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 129,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Thanks Krzysztof, for comments as per discussion with Vijay, will be updating PMSH Monitoring Policy under applicationConfig in Values.yaml",
      "parentUuid": "7ac2b039_5d72f961",
      "range": {
        "startLine": 118,
        "startChar": 0,
        "endLine": 129,
        "endChar": 16
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dff866c7_b960dacf",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 93
      },
      "writtenOn": "2021-04-01T00:41:43Z",
      "side": 1,
      "message": "similar comment to above; need to be handled generic (env name should be retrieved from values.yaml)",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 163,
        "endChar": 18
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05b9deb1_17ac3acb",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-01T15:23:06Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dff866c7_b960dacf",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 163,
        "endChar": 18
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b78b15d9_fe0bd054",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "+1. There is a commit from Jack Lucas that aims at handling env variables in the generic way",
      "parentUuid": "05b9deb1_17ac3acb",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 163,
        "endChar": 18
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65303eb9_a6a661c4",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Yes, will get rebase once Jack changes are merged.",
      "parentUuid": "b78b15d9_fe0bd054",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 163,
        "endChar": 18
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ed567f9_4b496650",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 249,
      "author": {
        "id": 93
      },
      "writtenOn": "2021-04-01T00:41:43Z",
      "side": 1,
      "message": "generic name",
      "range": {
        "startLine": 249,
        "startChar": 14,
        "endLine": 249,
        "endChar": 25
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2206747_6d5de924",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 3
      },
      "lineNbr": 249,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-01T15:23:06Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8ed567f9_4b496650",
      "range": {
        "startLine": 249,
        "startChar": 14,
        "endLine": 249,
        "endChar": 25
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eae1de01_cdac4528",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/requirements.yaml",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "@local",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8958ebc3_ddacabe0",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/requirements.yaml",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eae1de01_cdac4528",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0be578c3_9198589d",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/resources/config/application.json",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 93
      },
      "writtenOn": "2021-04-01T00:41:43Z",
      "side": 1,
      "message": "as this configuration is relatively static and loaded at deployment time, it could be handled as application config directly. Any reason why this is retrieved using policy key?",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34b500d0_9ee0a0ca",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/resources/config/application.json",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-01T15:23:06Z",
      "side": 1,
      "message": "\u003e We are using configMap to populate PMSH Monitoring policy to Concul via Consul Loader Image in Init-Container. which is making use of Consul Loader Image to put data against same dcae-pmsh parent Key with \"policy\" as key which will keep data in nested fashion with relevent keys and at moment we are querying data with \"policy\" key in PMSH Code base this help us with zero code update impact on PMSH.\n\u003e Also if we dont provide a explict key, values in consul will get overridden against same key, after having policy as key below is data in consul.\n\n\u003e curl --location --request GET \u0027http://xx.xx.xx.xx:10000/service_component_all/dcae-pmsh\u0027\n{\n   \"config\":{\n    },\n   \"policy\":{\n      \"subscription\":{}\n    },\n}",
      "parentUuid": "0be578c3_9198589d",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d5fb632_292e6608",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/resources/config/application.json",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Updated",
      "parentUuid": "34b500d0_9ee0a0ca",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "743b497a_bc99aeb8",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/values.yaml",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "please move id \u0026 password to secret",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "503ccb39_21f9b82e",
        "filename": "kubernetes/dcaegen2-services/components/dcae-pmsh/values.yaml",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "743b497a_bc99aeb8",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06d9d5f6_09669e99",
        "filename": "kubernetes/dcaegen2-services/requirements.yaml",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "we are already on 8.0 so you need to rebase;)",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6d4b852_fc62233f",
        "filename": "kubernetes/dcaegen2-services/requirements.yaml",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Will rebase to latest Jack Lucas changes thereafter will add dcae-pmsh entry on this file.",
      "parentUuid": "06d9d5f6_09669e99",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4bf7903c_be3c2161",
        "filename": "kubernetes/dcaegen2-services/requirements.yaml",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "file:// requirements outside of common are a pure evil. Sorry for not noticing this sooner. Please switch to @local",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "504e7e20_4c2b9259",
        "filename": "kubernetes/dcaegen2-services/requirements.yaml",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-10T19:34:19Z",
      "side": 1,
      "message": "Will updated this file after successful rebase.",
      "parentUuid": "4bf7903c_be3c2161",
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8fdb589b_c70a645e",
        "filename": "kubernetes/dcaegen2-services/values.yaml",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 93
      },
      "writtenOn": "2021-04-01T00:41:43Z",
      "side": 1,
      "message": "default to be set false for non-bootstrap components (this can be overridden based on deployment override file)",
      "range": {
        "startLine": 21,
        "startChar": 11,
        "endLine": 21,
        "endChar": 15
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f6fa52c_d400ddc0",
        "filename": "kubernetes/dcaegen2-services/values.yaml",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 6004
      },
      "writtenOn": "2021-04-01T15:23:06Z",
      "side": 1,
      "message": "Will updated in next patch-set.",
      "parentUuid": "8fdb589b_c70a645e",
      "range": {
        "startLine": 21,
        "startChar": 11,
        "endLine": 21,
        "endChar": 15
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db945e46_eb1a05e0",
        "filename": "kubernetes/dcaegen2-services/values.yaml",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-04-06T22:49:46Z",
      "side": 1,
      "message": "just for my own understanding. pmsh is a service that is going to be deployed dynamically by dcae on its own or based on the use-case, user is supposed to enable it in the override file?",
      "parentUuid": "2f6fa52c_d400ddc0",
      "range": {
        "startLine": 21,
        "startChar": 11,
        "endLine": 21,
        "endChar": 15
      },
      "revId": "282d7e9845c3de91dd8ee73109441355a49bcb72",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}