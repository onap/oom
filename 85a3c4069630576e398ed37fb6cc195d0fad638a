{
  "comments": [
    {
      "key": {
        "uuid": "f59687ae_65231d94",
        "filename": "kubernetes/common/mariadb-galera/templates/job.yaml",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-04-09T07:45:17Z",
      "side": 1,
      "message": "I\u0027m not sure to understand why we delete PVC here...",
      "revId": "85a3c4069630576e398ed37fb6cc195d0fad638a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da6cb429_7850a466",
        "filename": "kubernetes/common/mariadb-galera/templates/job.yaml",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 6339
      },
      "writtenOn": "2020-04-09T12:19:13Z",
      "side": 1,
      "message": "The reason is that when we apply \"helm upgrade --force\", statefulset and old PV of mariadb-galera (release E) will be deleted, but the old PVC will remain in \"Terminating phase forever\". After the upgrade, new statefulset and new PVs are created, but this new PVs cannot be bound to any PVCs since the old PVCs are not automatically deleted (old PVCs of statefulset can only be deleted by command \"kubectl delete pvc\"). Only when old PVCs are deleted and new PVCs are created that they can bind to the new PVs. This is the feature of current kubernetes version, so hopefully future version might help to adjust this feature.",
      "parentUuid": "f59687ae_65231d94",
      "revId": "85a3c4069630576e398ed37fb6cc195d0fad638a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a63ce9e4_b95da89b",
        "filename": "kubernetes/common/mariadb-galera/templates/job.yaml",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-04-09T13:10:25Z",
      "side": 1,
      "message": "OK cool!",
      "parentUuid": "da6cb429_7850a466",
      "revId": "85a3c4069630576e398ed37fb6cc195d0fad638a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}