{
  "comments": [
    {
      "key": {
        "uuid": "dc65e7b9_62e44b82",
        "filename": ".ci/find-tabs.sh",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T08:09:33Z",
      "side": 1,
      "message": "echo alone is normally enough to display a LF",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4dc1331_d009dc38",
        "filename": ".ci/find-tabs.sh",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-12-09T12:38:24Z",
      "side": 1,
      "message": "I\u0027ve reworked using printf",
      "parentUuid": "dc65e7b9_62e44b82",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d2cc7d0_71f7b1e7",
        "filename": ".ci/find-tabs.sh",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T13:19:10Z",
      "side": 1,
      "message": "fair enough",
      "parentUuid": "b4dc1331_d009dc38",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91be9928_0dbc3d09",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T08:31:25Z",
      "side": 1,
      "message": "here is an URL with an  example on how enable tox with Gitlab CI\n\nhttps://gitlab.inria.fr/msimonin/python-grid5000/-/blob/master/.gitlab-ci.yml",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2aaa05f_1fdec0c9",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T10:58:14Z",
      "side": 1,
      "message": "pre-commit profile and some other are missing.\nI think it is more indeicated to rely on tox.ini envlist and just run \"tox\" (or even better \"tox -p auto\" to have // jobs if possible)",
      "parentUuid": "91be9928_0dbc3d09",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5aae73d_be6a2c81",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-12-09T12:38:24Z",
      "side": 1,
      "message": "pre commit was doing:\n* whitespace --\u003e done in a specific shell script\n* tabs --\u003e done in a specific shell script\n* gitlint --\u003e done in a dedicated job\n\nso I don\u0027t see the interest of using it.\n\nDo I miss something?",
      "parentUuid": "f2aaa05f_1fdec0c9",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a73bd24f_bad3b0b2",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T13:19:10Z",
      "side": 1,
      "message": "yes this is also intended to be installed in git hooks locally to perform modifications locall y and avoid loading the gate with back and returns.\ncf tox profiles pre-commit-install and pre-commit-uninstall\nWith scripts the behavior is not guaranteed to be the same locally",
      "parentUuid": "a5aae73d_be6a2c81",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9923fefa_e4b85b52",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-12-09T16:20:10Z",
      "side": 1,
      "message": "to be honest, I\u0027m pretty sure that 99% of OOM contributors are not using them.\n\nthe one using them can still use tox + precommit hook to install them but we don\u0027t need to use them in the gate",
      "parentUuid": "a73bd24f_bad3b0b2",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fabb597a_b5d3c9c1",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T18:53:50Z",
      "side": 1,
      "message": "Everyone shoud use them before uploading code in my opinion.\nThese checks are just here to ensure it has been correctly done.\n\nAs it is written here, those scripts are not git hooks so the CI behavior are not ensured to be reproduced correctly on contributors system. More details in the next comment.",
      "parentUuid": "9923fefa_e4b85b52",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1de6adae_703bd495",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T10:58:14Z",
      "side": 1,
      "message": "this is no more the only command use.\n\nI think we should stick with tox.",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c411907_e05e923e",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-12-09T12:38:24Z",
      "side": 1,
      "message": "I don\u0027t see the point of using tox to launch a few shell lines\n\nI\u0027ve created a script that does the same",
      "parentUuid": "1de6adae_703bd495",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70152c63_0b378e2c",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T13:19:10Z",
      "side": 1,
      "message": "+ CÃ©dric\n\nOutsourcing these commands from tox.ini to a dedicated script makes sense because of tox quoting hell issues and also to avoid direct calls to \"sh\" inside tox, what is a good thing from a virtualenv isolation perspective.\n\nThough, IMO linters calls, even shell scripts, should better be centralized to a tox profile and this script should be called from tox.\nThis is highly wishable to reproduce CI behavior locally (moreover with python executables) but also for maintainability as already explained in https://gerrit.onap.org/r/c/ci-management/+/124939 and https://gerrit.onap.org/r/c/ci-management/+/124940.\n\nOne consequence of spreading linters configurations among several places is to forget repercuting some changes to a place as already observed in https://gerrit.onap.org/r/c/ci-management/+/125018\nFrom a sysadmin perspective, this also means installing new docker images for trivial scripts that should be runnable everywhere, what burdens the infra.",
      "parentUuid": "6c411907_e05e923e",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14cbed8e_0c200d6c",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-12-09T16:20:10Z",
      "side": 1,
      "message": "Well I\u0027m not in favour of that to be honest.\n\nI understand this is your point of view but I do prefer the simplicity of using direct scripts instead of running them via tox. I don\u0027t see the value add.\n\ncheckbashims needs to be installed, even if we launch it via tox, the other scripts only needs git, curl, jq, find, gnu grep, sed and cut.\n\nNone of them are python based stuff so I think tox is not needed.",
      "parentUuid": "70152c63_0b378e2c",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bae52f4_a08f181f",
        "filename": ".gitlab-ci.yml",
        "patchSetId": 3
      },
      "lineNbr": 180,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T18:53:50Z",
      "side": 1,
      "message": "It may look simpler but I am pretty sure it is not at the end.\n\nThis is not only a matter of portability and maintenability.\nThe solution you propose here is adherent to gitlab-ci and is not ensured to work the same way locally on contributors OS, what makes any troubleshooting in the CI much more complex and longer since you need to run it on the same target OS than the CI, with docker for example.\nTox virtualenv is a much more lightweight solution.\nAlso as a result, OOM contributors are urged to upload their code to the repo to evaluate the results even for basic linting concerns, what leads to avoidable extra-loads on the CI infra.\n\nWith tox or pre-commit, it can work locally in any system and also in any CI (jenkins, gitlab-ci, github, drone-CI)  with a minimal configuration. You can even force concrete dependencies to ensure the same python packages are used without affecting the contributor operating system.\n\nThis is not the case with such scripts. Concrete dependencies are hidden and modifications made by the contributors to support them might affect their whole systems if they don\u0027t pass by a chroot/container environment. Moreover with GNU grep, sed etc, you can have issues with others UN*X variants. These issues can be much more complex than dealing with python hard and soft dependencies.\n\nOf course, this explanation can be discussed for checkbashisms since it is not python based.\nBut checkbashisms use here is indeed a last resort workaround to have a linter that works with helm-altered scripts. I would have used the much more elaborate bashate python tool if I add more knowledge on helm to propose this other solution.\nBut please note this checkbahisms profile is the only exception in the current tox.ini configuration. All the other profiles in tox.ini are python-based tools (pre-commit*, gitlint, autopep8, docs, docs-linkcheck, doc8, pylint)",
      "parentUuid": "14cbed8e_0c200d6c",
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "082e79e6_edb118cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T08:09:33Z",
      "side": 1,
      "message": "I suspect this Issue-Id was truncated",
      "range": {
        "startLine": 12,
        "startChar": 10,
        "endLine": 12,
        "endChar": 15
      },
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71aa0d0f_12ea6d9e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-12-09T12:38:24Z",
      "side": 1,
      "message": "no, it\u0027s just we don\u0027t need a \"real\" one ;)",
      "parentUuid": "082e79e6_edb118cd",
      "range": {
        "startLine": 12,
        "startChar": 10,
        "endLine": 12,
        "endChar": 15
      },
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c02cbee_c2a0e4ce",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 3685
      },
      "writtenOn": "2021-12-09T13:19:10Z",
      "side": 1,
      "message": "what about OOM-2643 instead ?",
      "parentUuid": "71aa0d0f_12ea6d9e",
      "range": {
        "startLine": 12,
        "startChar": 10,
        "endLine": 12,
        "endChar": 15
      },
      "revId": "1a6f1b0b5e2f349c50f74520bd888eada20952b9",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}