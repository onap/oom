{
  "comments": [
    {
      "key": {
        "uuid": "359f3a98_9e4bfa11",
        "filename": "kubernetes/common/common/templates/_pod.tpl",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-05-15T16:32:52Z",
      "side": 1,
      "message": "After I did the certInitializer work I tend to believe that we should provide a fully fledged chart not just template.\n\nWhy?\nJust to not copy paste number of times the same values that easily get out of sync between charts",
      "revId": "c7750a340cb5618cbf52e4000a7dc40ad7fae3dd",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3283269_2be36c11",
        "filename": "kubernetes/common/common/templates/_pod.tpl",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-05-15T18:12:36Z",
      "side": 1,
      "message": "Well here it’s just global values and a list for containers. I don’t see what would get out of sync. \n\nBut I agree on other templates we should move to a regular chart",
      "parentUuid": "359f3a98_9e4bfa11",
      "revId": "c7750a340cb5618cbf52e4000a7dc40ad7fae3dd",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9567f72_0dace7f0",
        "filename": "kubernetes/common/common/templates/_pod.tpl",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-05-15T18:18:44Z",
      "side": 1,
      "message": "Global values are tricky. Let\u0027s take aaf_agent image as an example. It\u0027s set in number of different projects but then finally overwritten in the ONAP chart. So depending on which chart do you render you will get a different version of aaf_agent being used.\n\nThe same is with pullPolicy and all repos. Instead of having them in one place we copy paste it from chart to chart and this gets out of sync when we update version",
      "parentUuid": "a3283269_2be36c11",
      "revId": "c7750a340cb5618cbf52e4000a7dc40ad7fae3dd",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "151a5517_62e4de03",
        "filename": "kubernetes/common/common/templates/_pod.tpl",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-05-18T09:11:45Z",
      "side": 1,
      "message": "Ok, I tried to move to a chart but the way I did doesn\u0027t solve anything:\n\nJust to explain, I may have several \"wait for\" in the same chart (VID is a good example for that and that\u0027s why I\u0027ve chosen it).\n\nSo I need to be able to give the \"right\" list to the template.\nAnd as it\u0027s a template and not a full deployment, I cannot require several times the template (one per wait list) because the name of the template is always the same.\n\nSo I need to give a list and \"dot\", which will be vid \"dot\" and not \"readinessCheck dot\".\nSo I\u0027ll need to provide global values on VID just as before (I cannot leave blanck readinessRepo/readinessImage blank).\n\nYou actually have the same issue with certInitializer ($dot.Values.global.readinessRepository L46 of your template will be rendered by global of parent chart and not global of certInitializer).\n\nIt won\u0027t change nothing at the end (global will be onap global) but you\u0027ll still have the same issue as having the template in common.\nAnd as readiness is just a template, I don\u0027t see the point to put it into it\u0027s own chart, at least with the way I\u0027m doing it...",
      "parentUuid": "a9567f72_0dace7f0",
      "revId": "c7750a340cb5618cbf52e4000a7dc40ad7fae3dd",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0373fea2_d6acab13",
        "filename": "kubernetes/common/common/templates/_pod.tpl",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 4965
      },
      "writtenOn": "2020-05-18T10:54:27Z",
      "side": 1,
      "message": "\u003e Ok, I tried to move to a chart but the way I did doesn\u0027t solve anything:\n\u003e \n\u003e Just to explain, I may have several \"wait for\" in the same chart (VID is a good example for that and that\u0027s why I\u0027ve chosen it).\n\u003e \n\u003e So I need to be able to give the \"right\" list to the template.\n\u003e And as it\u0027s a template and not a full deployment, I cannot require several times the template (one per wait list) because the name of the template is always the same.\n\u003e \n\u003e So I need to give a list and \"dot\", which will be vid \"dot\" and not \"readinessCheck dot\".\n\u003e So I\u0027ll need to provide global values on VID just as before (I cannot leave blanck readinessRepo/readinessImage blank).\n\u003e \n\u003e You actually have the same issue with certInitializer ($dot.Values.global.readinessRepository L46 of your template will be rendered by global of parent chart and not global of certInitializer).\n\u003e \n\nHmm good catch I need to fix this xD",
      "parentUuid": "151a5517_62e4de03",
      "revId": "c7750a340cb5618cbf52e4000a7dc40ad7fae3dd",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}