{
  "comments": [
    {
      "key": {
        "uuid": "0d97d089_b74dcc1c",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 7
      },
      "lineNbr": 88,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-03-09T17:02:33Z",
      "side": 1,
      "message": "please add before:\n{{- $global :\u003d . -}}",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12609223_b61c3ac0",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 511
      },
      "writtenOn": "2021-03-09T16:16:18Z",
      "side": 1,
      "message": "I believe this is the source of the problem with patchset 7.  \".\" within a range is not the global context.  Need to capture it before the range and pass it here.",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e592f2d9_46a5edf2",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-03-09T17:02:33Z",
      "side": 1,
      "message": "please change to {{- include \"common.secret.envFromSecretFast\" (dict \"global\" $global \"uid\" $cred.uid \"key\" $cred.key) | indent 10 }}",
      "parentUuid": "12609223_b61c3ac0",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "003d2064_fad61595",
        "filename": "kubernetes/dcaegen2-services/common/dcaegen2-services-common/templates/_deployment.tpl",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-03-09T17:20:26Z",
      "side": 1,
      "message": "thanks for finding it and fixing before I managed to get into this patch! That was obviously my mistake so sorry for that",
      "parentUuid": "e592f2d9_46a5edf2",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ac45de8_386298fb",
        "filename": "kubernetes/dcaegen2-services/components/dcae-hv-ves-collector/values.yaml",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 511
      },
      "writtenOn": "2021-03-08T18:14:40Z",
      "side": 1,
      "message": "While I don\u0027t strongly object to this change, I don\u0027t see any added benefit for security.  The plaintext password is still in the values.yaml file.  There is just more indirection.\nTHe proper solution for this is to change AAF to use derived passwords and store them into secrets that DCAE (and other AAF users) could access.\nPossibly adding the secret now will mean slightly less work in the future if the change is made to AAF, but apart from that I see no benefit and only added complexity.",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a14fe321_0900d117",
        "filename": "kubernetes/dcaegen2-services/components/dcae-hv-ves-collector/values.yaml",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 4965
      },
      "writtenOn": "2021-03-09T15:20:32Z",
      "side": 1,
      "message": "Ok so the benefit is very simple.\nEven through password is still hardcoded it can be changed by the user at the deployment time and the new password that user will set is going to be handled properly which means stored in secret and then in a file that is never written to the disk (emptyDir that resides in the memory)",
      "parentUuid": "9ac45de8_386298fb",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1dddd08_f6c3a15c",
        "filename": "kubernetes/dcaegen2-services/components/dcae-hv-ves-collector/values.yaml",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 511
      },
      "writtenOn": "2021-03-09T16:07:42Z",
      "side": 1,
      "message": "It was possible previously to change the password at deployment time, since the password information was in values.yaml.  Your change makes no difference.  In the new version and in the previous version, it\u0027s necessary to change the passwords not only for the microservices but also (separately) for the servers that are authenticating them.  It takes coordinated changes in two places.\n\nAlso, the change you made is not working.  It doesn\u0027t pass verification.  It\u0027s probably a simple fix, but since the problem is three levels deep in the _secret template, it\u0027s not obvious to someone to who isn\u0027t familiar with the code.\n\nAs I said, I don\u0027t strongly object to this change (assuming we can get it to work), but I don\u0027t agree with the reasoning behind it. Too much added complexity, too little benefit in my view.",
      "parentUuid": "a14fe321_0900d117",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "146be295_6e1fb97e",
        "filename": "kubernetes/dcaegen2-services/components/dcae-hv-ves-collector/values.yaml",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-03-09T17:02:33Z",
      "side": 1,
      "message": "when the work is well done (and I agree, we\u0027re not there yet), the password would be set only at one place (by the server) and the clients would refer to the server\u0027s secret (as we\u0027re doing for databases for example).\n\nand with the way it\u0027s done, creds are only in the override (if you obviously change it ;) ) which is stored in a secret.\n\nBefore it would have been directly written into the config map, which is less secure",
      "parentUuid": "d1dddd08_f6c3a15c",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b052b3ab_e0acc2aa",
        "filename": "kubernetes/dcaegen2-services/components/dcae-tcagen2/values.yaml",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 2319
      },
      "writtenOn": "2021-03-09T17:02:33Z",
      "side": 1,
      "message": "please remove the spaces",
      "revId": "07204e36f0d0731c3df9698f53943bae22e1ab36",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}