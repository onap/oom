# Copyright Â© 2018 AT&T USA
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# global values
global:
  nodePortPrefix: 302
  readinessRepository: oomk8s
  readinessImage: readiness-check:2.0.0
  loggingRepository: docker.elastic.co
  loggingImage: beats/filebeat:5.5.0


  tag: 1.3.0-STAGING-latest
  # This will be a environment variable in the container for loading client certs
  target_env: dev
  # environment to be deployed into
  # dev, e2e-s1, e2e-s2, e2e-ti, ist, ist-ti, prod-s1, prod-s2, psl
  environment: dev
  # environment for secrets to be deployed into
  # dev, e2e, e2e-ti, ist, ist-ti, prod
  secretEnv: dev
  # whether or not to deploy secrets
  deploySslSecrets: false
  # db secret name
  dbSecretName: mso-maria-db-secret
  # docker repository
  dockerRepository: nexus3.onap.org:10001/so/
  # image pull Policy
  pullPolicy: IfNotPresent
  #charts
  openstack-adapter: so-openstack-adapter
  api-handler-infra: so-api-handler-infra
  asdc-controller: so-asdc-controller
  bpmn-infra: so-bpmn-infra
  sdnc-adapter: so-sdnc-adapter
  vfc-adapter: so-vfc-adapter

subChartsOnly:
  enabled: true  

# application configuration
config:
  # message router configuration
  dmaapTopic: "AUTO"
  # openstack configuration
  openStackUserName: "vnf_user"
  openStackRegion: "RegionOne"
  openStackKeyStoneUrl: "http://1.2.3.4:5000"
  openStackServiceTenantName: "service"
  openStackEncryptedPasswordHere: "c124921a3a0efbe579782cde8227681e"
  logstashServiceName: log-ls
  logstashPort: 5044
  sniro:
    serviceName: sniro-emulator
    port: 80
  aai:
    serviceName: aai
    port: 8443
  messagerouter:
    serviceName: message-router
    port: 3904
  msb:
    serviceName: msb-iag
    port: 80
  oof:
    serviceName: oof-has-api
    port: 8091
  sdnc:
    serviceName: sdnc
    port: 8282
  sdc:
    serviceName: sdc-be
    port: 8443

# subchart configuration
mariadb:
  nameOverride: so-db

# default number of instances
replicaCount: 1

nodeSelector: {}

affinity: {}

# probe configuration parameters
liveness:
  initialDelaySeconds: 10
  periodSeconds: 10
  # necessary to disable liveness probe when setting breakpoints
  # in debugger so K8s doesn't restart unresponsive container
  enabled: true

readiness:
  initialDelaySeconds: 10
  periodSeconds: 10

service:
  type: NodePort
  name: so
  portName: so
  internalPort: 8080
  nodePort: 23
  internalPort2: 3904
  nodePort2: 25
  internalPort3: 3905
  nodePort3: 24
  internalPort4: 9990
  nodePort4: 22
  internalPort5: 8787
  nodePort5: 50

ingress:
  enabled: false

resources: {}
# openstack
so-openstack-adapter:
    pod:
        imageName: openstack-adapter
        replicaCount: 1
        minReadySeconds: 10
        containerPort: 8443
        logPath: ./logs/openstack/
    service:
        type: ClusterIP
        port: 8300
        targetPort: 8443
        portName: openstack-port
    updateStrategy:
        type: RollingUpdate
        maxUnavailable: 1
        maxSurge: 1
    resources:
        requests:
          memory: 1Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 2000m
    livenessProbe:
        path: /manage/health
        port: 8443
        scheme: HTTPS
        initialDelaySeconds: 90
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3
# apihandler specific values
so-api-handler-infra:
    pod:
        imageName: api-handler-infra
        replicaCount: 1
        minReadySeconds: 10
        containerPort: 8443
        logPath: ./logs/apih/
    service:
        type: NodePort
        nodePort: 30251
        port: 8100
        targetPort: 8443
        portName: apih-port
    updateStrategy:
        type: RollingUpdate
        maxUnavailable: 1
        maxSurge: 1
    resources:
        requests:
          memory: 1Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 2000m
    livenessProbe:
        path: /manage/health
        port: 8443
        scheme: HTTPS
        initialDelaySeconds: 90
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3
# asdccontroller specific values
so-asdc-controller:
    pod:
        imageName: asdc-controller
        replicaCount: 1
        minReadySeconds: 10
        containerPort: 8443
        logPath: ./logs/asdc/
    service:
        type: ClusterIP
        port: 8500
        targetPort: 8443
        portName: asdc-port
    updateStrategy:
        type: RollingUpdate
        maxUnavailable: 1
        maxSurge: 1
    resources:
        requests:
          memory: 1Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 2000m
    livenessProbe:
        path: /manage/health
        port: 8443
        scheme: HTTPS
        initialDelaySeconds: 90
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3
# bpmninfra specific values
so-bpmn-infra:
    pod:
        imageName: bpmn-infra
        replicaCount: 1
        minReadySeconds: 10
        containerPort: 8443
        logPath: ./logs/bpmn/
    service:
        type: ClusterIP
        port: 8200
        targetPort: 8443
        portName: bpmn-port
    updateStrategy:
        type: RollingUpdate
        maxUnavailable: 1
        maxSurge: 1
    resources:
        requests:
          memory: 1Gi
          cpu: 500m
        limits:
          memory: 8Gi
          cpu: 4000m
    livenessProbe:
        path: /manage/health
        port: 8443
        scheme: HTTPS
        initialDelaySeconds: 90
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3
# sdncadapter specific values
so-sdnc-adapter:
    pod:
        imageName: sdnc-adapter
        replicaCount: 1
        minReadySeconds: 10
        containerPort: 8443
        logPath: ./logs/sdnc/
    service:
        type: ClusterIP
        port: 8400
        targetPort: 8443
        portName: sdnc-port
    updateStrategy:
        type: RollingUpdate
        maxUnavailable: 1
        maxSurge: 1
    resources:
        requests:
          memory: 1Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 2000m
    livenessProbe:
        path: /manage/health
        port: 8443
        scheme: HTTPS
        initialDelaySeconds: 90
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3
# sdncadapter specific values
so-vfc-adapter:
    pod:
        imageName: vfc-adapter
        replicaCount: 1
        minReadySeconds: 10
        containerPort: 8443
        logPath: ./logs/vfc/
    service:
        type: ClusterIP
        port: 8600
        targetPort: 8443
        portName: vfc-port
    updateStrategy:
        type: RollingUpdate
        maxUnavailable: 1
        maxSurge: 1
    resources:
        requests:
          memory: 1Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 2000m
    livenessProbe:
        path: /manage/health
        port: 8443
        scheme: HTTPS
        initialDelaySeconds: 90
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3