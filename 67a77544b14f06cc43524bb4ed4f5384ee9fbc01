{
  "comments": [
    {
      "key": {
        "uuid": "60d729c9_7e593c3d",
        "filename": "kubernetes/dcaegen2/components/dcae-cloudify-manager/templates/deployment.yaml",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-06-24T07:36:08Z",
      "side": 1,
      "message": "for my curiosity (as I\u0027m building a template for readiness part), the \u0027-t 15\u0027 is mandatory (I\u0027ve not took it into account...)?",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c81ce7ad_bdb1b63f",
        "filename": "kubernetes/dcaegen2/components/dcae-cloudify-manager/templates/deployment.yaml",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 511
      },
      "writtenOn": "2020-06-24T21:52:38Z",
      "side": 1,
      "message": "It is not mandatory.  It\u0027s the time (in minutes) that the readiness check will continue before exiting with a failure.   The default is 10 minutes.   In practice (at least in my test environment), even 15 minutes is too short for some of the dependencies (sdc in particular), but the container restarts after the timeout, sometimes more than once, and eventually it succeeds.  I think probably I first used -t 15 because I copied it from an example somewhere, and I just continue to cut and paste when I create a new deployment.  (When you finish with your templating work, I will not be cutting and pasting anymore!)",
      "parentUuid": "60d729c9_7e593c3d",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdee9d4d_c3f96006",
        "filename": "kubernetes/dcaegen2/components/dcae-cloudify-manager/templates/deployment.yaml",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 5170
      },
      "writtenOn": "2020-06-25T06:44:46Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c81ce7ad_bdb1b63f",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef08d532_1353100d",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/templates/deployment.yaml",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-06-24T07:36:08Z",
      "side": 1,
      "message": "For new deployment, we expect you to use our templates and use \"apps/v1\" API (extensions/v1beta1 is deprecated since k8s v1.9 and removed in k8s v1.16)",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dda4b100_aaeee6a0",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/templates/deployment.yaml",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-06-24T07:36:08Z",
      "side": 1,
      "message": "please us our templates (kubernetes/dmaap/components/dmaap-bc/templates/deployment.yaml is a good example on how to use them).\nIf you don\u0027t manage, don\u0027t hesitate to ask for help",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cb12d06_21df56dc",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/templates/service.yaml",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-06-24T07:36:08Z",
      "side": 1,
      "message": "same here, please use \"common.service\" templates (still in dmaap)\nNote that it requires special way of describing service in values.yaml",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4814acbf_a03686fc",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/values.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-06-24T07:36:08Z",
      "side": 1,
      "message": "as said is service.yaml, there\u0027s a special way to describe it.\n\nFYI, we don\u0027t support for now different value for \"internal\" and \"external\" ports. I think it would be nice but for now we don\u0027t.\nIs it a big issue on your side?\n\nIf yes, I can \"quickly\" (so let\u0027s say a week) add this capability.",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93cfbea7_ff0b7584",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/values.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 511
      },
      "writtenOn": "2020-06-24T21:52:38Z",
      "side": 1,
      "message": "It\u0027s possible using your existing service template to create a ClusterIP Service where the port exposed by the Service and the port on the container are different.  Your template sets the targetPort to the port name.  The port definition in the container spec can use any port number it wishes as long as the port name matches the port name in the service.  So no additional work is needed.   I have set up the dcaemod-healthcheck Service to expose port 80 with the container port at 8080.",
      "parentUuid": "4814acbf_a03686fc",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e99a2e15_d2612484",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/values.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 5170
      },
      "writtenOn": "2020-06-25T06:44:46Z",
      "side": 1,
      "message": "If you use \"common.containerPorts\" (defined in kubernetes/common/common/templates/_pod.tpl), it will also use the \"port\" value in the port (and so the same value as external service).\nAnd so it wouldn\u0027t really work...\n\nI can add a new value \"internalPort\" in the port definition of the service that would be used if defined.\nWhat do you think?",
      "parentUuid": "93cfbea7_ff0b7584",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f97b0602_58b98d14",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/values.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 511
      },
      "writtenOn": "2020-06-25T16:25:11Z",
      "side": 1,
      "message": "I think it will be useful to set the Service port to a value that\u0027s different from the internal (container) port, especially since we are running containers without root privilege and so cannot use (easily) the standard ports for common protocols.\n\nI don\u0027t think it\u0027s essential for healthcheck, so I will switch to using the template for ports, and we will expose 8080 on the container and on the Service.  If do add \"internalPort\" later, let me know and we will try it here.",
      "parentUuid": "e99a2e15_d2612484",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd7f15a5_faa10906",
        "filename": "kubernetes/dcaemod/components/dcaemod-healthcheck/values.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 2319
      },
      "writtenOn": "2020-06-29T06:44:14Z",
      "side": 1,
      "message": "OK, I\u0027m inline with you!\nI do think it\u0027s a valid idea for 8080 -\u003e 80 or 8443 -\u003e 443 so I\u0027ll take a look on how to do it.",
      "parentUuid": "f97b0602_58b98d14",
      "revId": "67a77544b14f06cc43524bb4ed4f5384ee9fbc01",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}