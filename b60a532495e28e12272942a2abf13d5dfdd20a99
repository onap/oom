{
  "comments": [
    {
      "key": {
        "uuid": "2fce3b8c_7d194b20",
        "filename": "kubernetes/policy/charts/policy-apex-pdp/resources/config/config.json",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-07-13T14:59:42Z",
      "side": 1,
      "message": "Question for APEX experts:  \nis there apex-pdp logic that examines these properties in a generic way to decode these into base64 variables at apex initialization?\nOtherwise they should not be encoded in base64 format.",
      "revId": "b60a532495e28e12272942a2abf13d5dfdd20a99",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f32684ad_917cbdd8",
        "filename": "kubernetes/policy/charts/policy-apex-pdp/resources/config/config.json",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 811
      },
      "writtenOn": "2020-07-13T15:05:59Z",
      "side": 1,
      "message": "We have a JIRA, https://jira.onap.org/browse/POLICY-2550, to eliminate base64 encoding from password properties.  It APEX still expects it to be base-64 encoded, perhaps leave this as is until we get to that JIRA?",
      "parentUuid": "2fce3b8c_7d194b20",
      "revId": "b60a532495e28e12272942a2abf13d5dfdd20a99",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4de022d8_6c9f4f41",
        "filename": "kubernetes/policy/charts/policy-apex-pdp/resources/config/config.json",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 4903
      },
      "writtenOn": "2020-07-13T15:48:20Z",
      "side": 1,
      "message": "Actually this file itself can be deleted. Apex uses OnapPfCofig.json now as the startup config file. This file is leftover from the old architecture which we don\u0027t use anymore.\nCan we get this file removed as part of this review?",
      "parentUuid": "f32684ad_917cbdd8",
      "revId": "b60a532495e28e12272942a2abf13d5dfdd20a99",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7d68800_8115c01f",
        "filename": "kubernetes/policy/charts/policy-apex-pdp/resources/config/config.json",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-07-13T16:19:39Z",
      "side": 1,
      "message": "I think Ross needs some direction here on how APEX sets the truststore and keystore password and cert store location must be set for apex, in order to do the right changes, it\u0027s very confusing.\n\nIs there any configuration that should go here?\n\nhttps://git.onap.org/oom/tree/kubernetes/policy/charts/policy-apex-pdp/resources/config/OnapPfConfig.json\n\nOr it is just in the image, and the location and password should be passed as environment variables?\n\nShould the passwords be base64 encoded or not?",
      "parentUuid": "4de022d8_6c9f4f41",
      "revId": "b60a532495e28e12272942a2abf13d5dfdd20a99",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fd8c8ea_83377093",
        "filename": "kubernetes/policy/charts/policy-apex-pdp/resources/config/config.json",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 4903
      },
      "writtenOn": "2020-07-14T13:15:05Z",
      "side": 1,
      "message": "OnapPfConfig.json doesn\u0027t require any changes. It is in the script file in the image:\nhttps://github.com/onap/policy-apex-pdp/blob/master/packages/apex-pdp-package-full/src/main/package/scripts/apexApps.sh#L55\nHere the password is read from the env variable. KEYSTORE_PASSWD and TRUSTSTORE_PASSWD seems to be used. Whatever formats these passwords are set in the env variable in oom, that gets used to create the server in JettyServletServer class in policy-endpoints.",
      "parentUuid": "f7d68800_8115c01f",
      "revId": "b60a532495e28e12272942a2abf13d5dfdd20a99",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0fda4fb_18520ea4",
        "filename": "kubernetes/policy/charts/policy-apex-pdp/templates/statefulset.yaml",
        "patchSetId": 4
      },
      "lineNbr": 47,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-07-13T14:59:42Z",
      "side": 1,
      "message": "you\u0027ll also need to change this line to add the keystore password:   \n\n        - \"export TRUSTSTORE_PASSWORD_BASE64\u003d`echo -n ${TRUSTSTORE_PASSWORD} | base64`; export KEYSTORE_PASSWORD_BASE64\u003d`echo -n ${KEYSTORE_PASSWORD} | base64`; cd /config-input \u0026\u0026 for PFILE in `ls -1`; do envsubst \u003c${PFILE} \u003e/config/${PFILE}; done\"",
      "revId": "b60a532495e28e12272942a2abf13d5dfdd20a99",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}